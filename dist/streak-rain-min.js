class point{constructor(i,t){this.x=i,this.y=t}}class rainObject{constructor(i,t,n){this.x=i,this.y=t;var s=150*n;this.rain={start:new point(this.x-s,0-this.y),end:new point(this.x+5*n-s,0)},0!=s&&(this.rain.end.x=this.rain.start.x+Math.floor((this.rain.start.x-this.rain.end.x)/2),this.rain.end.y=this.rain.start.y+Math.floor((this.rain.start.y-this.rain.end.y)/2))}}class StreakRain{constructor(i){this.rainDownSpeed=(i.speed||60)/60,this.rainLength=i.length||10,this.rainNumber=(i.number||60)/60,this.fgColor=i.fgColor||"#ffffff",this.bgColor=i.bgColor||"#000000",this.windPower=0,this.cOpacity=.5,this.rains=new Array,this.init(),this.randomRain(),this.windowResize(),0!=this.windPower&&this.mousePosition()}init(){this.canvas=document.createElement("canvas"),this.canvas.id=(new Date).getTime(),this.canvas.textContent="you brower not support canvas",this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.canvas.style["background-color"]=this.bgColor,document.body.appendChild(this.canvas),document.body.style.margin=0,document.body.style.padding=0,this.ctx=this.canvas.getContext("2d"),this.ctx.globalAlpha=this.cOpacity,this.ctx.fillStyle=this.fgColor,this.ctx.strokeStyle=this.fgColor}randomRain(){for(var i=this.windPower/Math.abs(this.windPower),t=Math.floor(this.canvas.width*(0!=this.windPower?2:1)/this.rainNumber),n=0;n<this.rainNumber;n++){var s=this.getRandom(3*this.rainLength,8*this.rainLength),a=t*n,r=t*(n+1);i<0&&(a-=this.canvas.width,r-=this.canvas.width);var e=this.getRandom(a,r);this.rains.push(new rainObject(e,s,this.windPower))}}run(){window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRquestAniamtionFrame||window.oRequestAnimationFrame||function(i){return setTimeout(i,Math.floor(1e3/60))}),window.requestAnimationFrame(this.run.bind(this)),this.clearScreen();for(var i in this.rains)this.line(this.rains[i].rain.start,this.rains[i].rain.end);var t=[];for(var i in this.rains){var n=this.getRandom(1*this.rainDownSpeed,10*this.rainDownSpeed);for(var s in this.rains[i].rain)this.rains[i].rain[s].x+=this.windPower,this.rains[i].rain[s].y+=n;this.rains[i].rain.start.y>this.canvas.height&&t.push(i)}this.deleteRain(t),t=[],this.randomRain(this.rainNumber)}deleteRain(i){var t=new Array;for(var n in this.rains)i.includes(n)||t.push(this.rains[n]);this.rains=t}windowResize(){var i=this;window.onresize=function(){i.canvas.width=window.innerWidth,i.canvas.height=window.innerHeight}}mousePosition(){var i=this.windPower,t=this;this.canvas.addEventListener("mousemove",function(n){var s=Math.floor(t.canvas.width/2),a=n.clientX,r=Math.floor(s/2/5),e=Math.floor((a-s)/r);t.windPower=i*e},!1)}getRandom(i,t){return Math.floor(Math.random()*(t-i+1)+i)}line(i,t){this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y),this.ctx.lineTo(t.x,t.y),this.ctx.strokeStyle=this.fgColor,this.ctx.stroke(),this.ctx.closePath()}clearScreen(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.globalAlpha=this.cOpacity}}